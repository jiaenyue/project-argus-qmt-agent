# Data Agent Service

This service provides an API proxy for financial data, initially focusing on `xtquant` library functionalities.

## Features

- `/instrument_detail`: Fetches real-time contract information.

## Setup and Run

## ğŸš€ Quick Start

1. **ç¯å¢ƒå‡†å¤‡**
   ```bash
   # å…‹éš†é¡¹ç›®
   git clone <repository-url>
   cd project-argus-qmt-agent
   
   # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   # æˆ–
   venv\Scripts\activate     # Windows
   
   # å®‰è£…ä¾èµ–
   pip install -r requirements.txt
   ```

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   python main.py
   ```

3. **éªŒè¯æœåŠ¡**
   æœåŠ¡å¯åŠ¨åï¼Œè®¿é—® http://localhost:8000/docs æŸ¥çœ‹APIæ–‡æ¡£å¹¶æµ‹è¯•æ¥å£ã€‚

## ä¸»è¦åŠŸèƒ½

æœ¬æœåŠ¡é€šè¿‡åŸºäº **FastAPI** æ„å»ºçš„ HTTP(S) API æ¥å£ï¼Œæä¾› miniQMT çš„æ ¸å¿ƒæ•°æ®æŸ¥è¯¢åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

*   **è¡Œæƒ…æ•°æ®æœåŠ¡:**
    *   è·å–äº¤æ˜“æ—¥å† (`/trading_dates`)
    *   è·å–æ¿å—/è‚¡ç¥¨åˆ—è¡¨ (`/stock_list`)
    *   è·å–å•åª/å¤šåªåˆçº¦çš„è¯¦ç»†ä¿¡æ¯ (`/instrument_detail`)
    *   è·å–å¤šç§å‘¨æœŸï¼ˆåˆ†é’Ÿã€æ—¥ã€å‘¨ã€æœˆï¼‰çš„å†å²Kçº¿æ•°æ® (OHLCV) (`/hist_kline`)
    *   è·å–æœ€æ–°å¸‚åœºè¡Œæƒ…å¿«ç…§ (`/latest_market`)
*   **(å¯é€‰) å®¢æˆ·ç«¯äº¤äº’:**
    *   åˆ›å»ºå›¾è¡¨é¢æ¿ (`/create_chart_panel`) - æ­¤åŠŸèƒ½ä¾èµ–QMTå®¢æˆ·ç«¯çš„UIäº¤äº’èƒ½åŠ›ã€‚
*   **ç¯å¢ƒè§£è€¦:**
    *   å°† Windows å¹³å°çš„ miniQMT ä¾èµ–ä¸ä¸Šå±‚æ•°æ®å¤„ç†ç³»ç»Ÿæœ‰æ•ˆéš”ç¦»ã€‚
*   **æ˜“ç”¨æ€§ä¸è¿ç»´:**
    *   æä¾›åŸºç¡€ä½†å…¨é¢çš„æ—¥å¿—è®°å½•åŠŸèƒ½ (è®°å½•åˆ°æ§åˆ¶å°åŠ `qmt_data_agent.log` æ–‡ä»¶)ã€‚
    *   æœåŠ¡ç›‘å¬ç«¯å£å¯é€šè¿‡ç¯å¢ƒå˜é‡ `QMT_DATA_AGENT_PORT`çµæ´»é…ç½®ã€‚
    *   é€šè¿‡ FastAPI è‡ªåŠ¨ç”Ÿæˆ OpenAPI (Swagger) äº¤äº’å¼APIæ–‡æ¡£ (é€šå¸¸ä½äº `/docs` è·¯å¾„)ã€‚

## æ¶æ„ç®€ä»‹

æœ¬æ•°æ®ä»£ç†æœåŠ¡åœ¨é€»è¾‘ä¸Šåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒå±‚æ¬¡ï¼š

1.  **`xtquant` äº¤äº’å±‚**: ç›´æ¥é€šè¿‡ `xtquant` Python åº“ä¸åœ¨æœ¬åœ° Windows ç¯å¢ƒä¸­è¿è¡Œçš„ miniQMT å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ï¼Œè´Ÿè´£æ‰§è¡Œæ•°æ®è¯·æ±‚å’Œæ¥æ”¶åŸå§‹æ•°æ®ã€‚
2.  **API æœåŠ¡å±‚**: åŸºäº **FastAPI** æ„å»ºï¼Œè´Ÿè´£ï¼š
    *   æš´éœ²ç¬¦åˆ OpenAPI è§„èŒƒçš„ RESTful HTTP(S) API æ¥å£ã€‚
    *   å¤„ç†å®¢æˆ·ç«¯çš„APIè¯·æ±‚ï¼Œè¿›è¡Œå‚æ•°æ ¡éªŒã€‚
    *   è°ƒç”¨ `xtquant` äº¤äº’å±‚è·å–æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„JSONæ ¼å¼è¿”å›ç»™è°ƒç”¨æ–¹ã€‚
    *   å®ç°åŸºç¡€çš„è®¤è¯ (å¦‚API Key)ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½ã€‚
3.  **(æœªæ¥è§„åˆ’) MCP é€‚é…å±‚**: æ—¨åœ¨æ”¯æŒ Model Context Protocolï¼Œä»¥ä¾¿ä¸AIåŠ©æ‰‹ç­‰å·¥å…·é›†æˆã€‚

è¿™ç§åˆ†å±‚è®¾è®¡æ—¨åœ¨å®ç°æ¨¡å—åŒ–å’Œå…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚æ›´è¯¦ç»†çš„ç³»ç»Ÿæ¶æ„ã€ç»„ä»¶èŒè´£ã€æ•°æ®æµå’Œéƒ¨ç½²è¦æ±‚ï¼Œè¯·å‚é˜… [é¡¹ç›®æ–‡æ¡£ä¸­çš„ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ (`doc/system_design.md`)](doc/system_design.md)ã€‚

## å…ˆå†³æ¡ä»¶

> **âš ï¸ é‡è¦æé†’ï¼šæœ¬é¡¹ç›®ä¸¥æ ¼ä¾èµ– miniQMT è¿æ¥**
> 
> æœ¬é¡¹ç›®å·²ç§»é™¤æ‰€æœ‰æ¨¡æ‹Ÿæ•°æ®å’Œå›é€€æœºåˆ¶ã€‚é¡¹ç›®å¿…é¡»è¿æ¥åˆ°çœŸå®çš„ miniQMT å®¢æˆ·ç«¯æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚
> å¦‚æœæ— æ³•è¿æ¥ miniQMTï¼Œç³»ç»Ÿå°†ç›´æ¥æŠ¥é”™è€Œä¸ä¼šæä¾›ä»»ä½•æ¨¡æ‹Ÿæ•°æ®ã€‚
> è¯·ç¡®ä¿åœ¨ä½¿ç”¨æœ¬é¡¹ç›®å‰å·²æ­£ç¡®å®‰è£…å¹¶é…ç½® miniQMT å®¢æˆ·ç«¯ã€‚

*   **Windows æ“ä½œç³»ç»Ÿ**
*   **Python 3.10.18** (æ¨èä½¿ç”¨Condaç¯å¢ƒç®¡ç†)
*   **miniQMT å®¢æˆ·ç«¯ (è¿…æŠ•é‡åŒ–äº¤æ˜“ç»ˆç«¯):** **å¿…é¡»**åœ¨åŒä¸€å° Windows æœºå™¨ä¸Šå®‰è£…å¹¶æ­£åœ¨è¿è¡Œã€‚è¿™æ˜¯é¡¹ç›®è¿è¡Œçš„å¼ºåˆ¶è¦æ±‚ï¼Œæ— æ›¿ä»£æ–¹æ¡ˆã€‚
*   **`xtquant` åº“:** è¿™æ˜¯ miniQMT å®¢æˆ·ç«¯è‡ªå¸¦çš„ Python API åº“ã€‚**å¿…é¡»**èƒ½å¤ŸæˆåŠŸå¯¼å…¥ï¼Œå¦åˆ™é¡¹ç›®æ— æ³•å¯åŠ¨ã€‚
    *   **éªŒè¯:** åœ¨æ‚¨çš„ Python ç¯å¢ƒä¸­æ‰§è¡Œ `python -c "from xtquant import xtdata; print(xtdata)"`ã€‚å¦‚æœæœªæŠ¥é”™ï¼Œåˆ™è¯´æ˜ `xtquant` å¯ç”¨ã€‚
    *   **æ•…éšœæ’é™¤:** å¦‚æœå¯¼å…¥å¤±è´¥ï¼Œæ‚¨å¯èƒ½éœ€è¦ï¼š
        *   å°† QMT å®‰è£…ç›®å½•ä¸‹çš„ `bin\Lib\site-packages` (æˆ–ç±»ä¼¼è·¯å¾„ï¼Œå…·ä½“å–å†³äºæ‚¨çš„QMTç‰ˆæœ¬å’Œå®‰è£…ä½ç½®) æ·»åŠ åˆ°ç³»ç»Ÿçš„ `PYTHONPATH` ç¯å¢ƒå˜é‡ã€‚
        *   æˆ–è€…ï¼Œå°† `xtquant` æ–‡ä»¶å¤¹ä» QMT çš„ Python åº“è·¯å¾„å¤åˆ¶åˆ°æ‚¨å½“å‰ Python ç¯å¢ƒçš„ `site-packages` ç›®å½•ã€‚
    *   **æ³¨æ„:** å¦‚æœæ— æ³•è§£å†³ `xtquant` å¯¼å…¥é—®é¢˜ï¼Œé¡¹ç›®å°†æ— æ³•è¿è¡Œï¼Œä¸å­˜åœ¨ä»»ä½•å›é€€é€‰é¡¹ã€‚
*   (å¯é€‰ï¼Œæœªæ¥AIé›†æˆ) **Node.js å’Œ npx:** å¦‚æœå¸Œæœ›ä½¿ç”¨ `xtquantai` çš„å®Œæ•´MCPæœåŠ¡å™¨åŠŸèƒ½ã€‚

## å®‰è£…ä¸é…ç½®

1.  **å…‹éš†æˆ–ä¸‹è½½æœ¬é¡¹ç›®ä»£ç ï¼š**
    ```bash
    git clone https://github.com/jiaenyue/project-argus-qmt-agent.git
    cd project-argus-qmt-agent
    ```
2.  **è¯¦ç»†å®‰è£…ä¸é…ç½®æ­¥éª¤:**
    è¯·å‚é˜… [å®‰è£…æŒ‡å— (INSTALL.md)](INSTALL.md) å’Œ [ç¯å¢ƒè®¾ç½®è¯´æ˜ (ENVIRONMENT_SETUP.md)](ENVIRONMENT_SETUP.md) è·å–è¯¦ç»†çš„è®¾ç½®è¯´æ˜ï¼ŒåŒ…æ‹¬ï¼š
    *   è®¾ç½® Python ç¯å¢ƒ (Python 3.10.18ï¼Œæ¨èä½¿ç”¨Conda)ã€‚
    *   æ¿€æ´» Conda ç¯å¢ƒ (`conda activate qmt_py310`)ã€‚
    *   ä» `requirements.txt` å®‰è£…ä¾èµ–ã€‚
    *   éªŒè¯ `xtquant` çš„å¯è®¿é—®æ€§ã€‚
    *   éªŒè¯ `xtquant` çš„å¯è®¿é—®æ€§ï¼ˆè¿™æ˜¯å¼ºåˆ¶è¦æ±‚ï¼‰ã€‚

## è¿è¡Œä»£ç†æœåŠ¡

æŒ‰ç…§ [å®‰è£…æŒ‡å— (INSTALL.md)](INSTALL.md) ä¸­çš„è¯´æ˜å®‰è£…å’Œé…ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `main.py` è„šæœ¬æ¥è¿è¡ŒæœåŠ¡ã€‚

1.  **ç¡®ä¿ miniQMT å®¢æˆ·ç«¯å·²ç™»å½•å¹¶æ­£å¸¸è¿è¡Œ (å¦‚æœä½¿ç”¨å®æ—¶æ•°æ®)ã€‚**
2.  **æ¿€æ´» Conda ç¯å¢ƒ:**
    ```bash
    conda activate qmt_py310
    # æˆ–ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
    activate_env.bat
    ```
3.  **å¯¼èˆªåˆ°é¡¹ç›®æ ¹ç›®å½•å¹¶è¿è¡Œï¼š**
    ```bash
    python main.py

    ```
    è¿™å°†ä»¥è‡ªåŠ¨æ¨¡å¼å¯åŠ¨æœåŠ¡ï¼ˆé¦–å…ˆå°è¯• MCP Inspectorï¼Œç„¶åå›é€€åˆ°ç›´æ¥æ¨¡å¼ï¼‰ã€‚æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®šæ¨¡å¼ï¼š
    *   `python main.py --mode direct` (ç›´æ¥æ¨¡å¼)
    *   `python main.py --mode inspector` (MCP Inspector æ¨¡å¼ï¼Œéœ€è¦ Node.js å’Œ npx)

    æ‚¨åº”è¯¥èƒ½çœ‹åˆ°æœåŠ¡å¯åŠ¨çš„æ—¥å¿—ä¿¡æ¯ã€‚

4.  **æ—¥å¿—æ–‡ä»¶:**
    æœåŠ¡ä¸»è¦å°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚MCP æœåŠ¡ (`src/xtquantai/server.py`) ä¼šå°†æ—¥å¿—è®°å½•åˆ°æ ‡å‡†è¾“å‡ºã€‚æœ‰å…³è¯¦ç»†çš„æ—¥å¿—é…ç½® (å°¤å…¶æ˜¯åœ¨ MCP ç¯å¢ƒä¸­)ï¼Œè¯·å‚é˜… MCP ç›¸å…³æ–‡æ¡£æˆ–æœåŠ¡è¾“å‡ºä¿¡æ¯ã€‚
    é¡¹ç›®å…³äºæ—¥å¿—çš„è¯¦ç»†è®¨è®ºå¯ä»¥åœ¨ [ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸­çš„"æ—¥å¿—è®°å½•å’Œç›‘æ§"éƒ¨åˆ† (`doc/system_design.md#5-æ—¥å¿—è®°å½•å’Œç›‘æ§`)](doc/system_design.md#5-æ—¥å¿—è®°å½•å’Œç›‘æ§) æ‰¾åˆ°ã€‚

## æŒä¹…åŒ–è¿è¡Œ (ä½œä¸º Windows æœåŠ¡ - æ¨è)

è¦å°†ä»£ç†ä½œä¸º Windows æœåŠ¡æŒä¹…è¿è¡Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `NSSM`ã€‚è¯·é¦–å…ˆå‚ç…§ [å®‰è£…æŒ‡å— (INSTALL.md)](INSTALL.md) å®ŒæˆåŸºæœ¬å®‰è£…æ­¥éª¤ï¼Œç„¶åæŒ‰ä»¥ä¸‹æ–¹å¼é…ç½® NSSMï¼š

1.  **ä¸‹è½½ NSSM:** ä» [NSSM å®˜ç½‘](https://nssm.cc/download) ä¸‹è½½ã€‚
2.  **å®‰è£…æœåŠ¡ (ç¤ºä¾‹):**
    *   å°† `nssm.exe` æ”¾ç½®åœ¨ä¸€ä¸ªåˆé€‚çš„ç›®å½• (ä¾‹å¦‚ `C:\NSSM\`)ã€‚
    *   ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ã€‚
    *   è¿è¡Œ `C:\NSSM\nssm.exe install ProjectArgusQMTDataAgent`
    *   åœ¨ NSSM å›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­ï¼š
        *   **Path (è·¯å¾„):** æŒ‡å‘æ‚¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨è·¯å¾„ (ä¾‹å¦‚ `C:\project-argus-qmt-agent\qmt_env\Scripts\python.exe`)ã€‚
        *   **Startup directory (å¯åŠ¨ç›®å½•):** æœ¬é¡¹ç›®çš„æ ¹ç›®å½• (ä¾‹å¦‚ `C:\project-argus-qmt-agent\`)ã€‚
        *   **Arguments (å‚æ•°):** `main.py` (å¦‚æœæ‚¨å¸Œæœ›æŒ‡å®šç‰¹å®šæ¨¡å¼ï¼Œå¯ä»¥æ˜¯ `main.py --mode direct`)ã€‚
        *   **Environment Tab (ç¯å¢ƒå˜é‡é¡µ):** å¯æ ¹æ®éœ€è¦è®¾ç½®å…¶ä»–ç¯å¢ƒå˜é‡ï¼Œä½†ä¸å†æ”¯æŒ `QMT_DATA_AGENT_PORT` ç­‰å›é€€æœºåˆ¶ç›¸å…³é…ç½®ã€‚
    *   ç‚¹å‡» "Install service" (å®‰è£…æœåŠ¡)ã€‚
3.  **å¯åŠ¨æœåŠ¡:**
    ```bash
    C:\NSSM\nssm.exe start ProjectArgusQMTDataAgent
    ```
    æˆ–è€…é€šè¿‡ Windows æœåŠ¡ç®¡ç†å™¨ (`services.msc`) å¯åŠ¨ã€‚

## ğŸ“š æ•™å­¦æ–‡æ¡£ä½“ç³»

æœ¬é¡¹ç›®æä¾›å®Œæ•´çš„æ•™å­¦æ–‡æ¡£ä½“ç³»ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŒæ¡APIçš„ä½¿ç”¨æ–¹æ³•ï¼š

### ğŸ¯ æ•™å­¦æ¨¡å—

| æ•™å­¦æ¨¡å— | Pythonè„šæœ¬ | Jupyter Notebook | å­¦ä¹ å†…å®¹ |
|----------|------------|------------------|----------|
| äº¤æ˜“æ—¥å† | [`01_trading_dates.py`](tutorials/01_trading_dates.py) | [`01_trading_dates.ipynb`](tutorials/notebooks/01_trading_dates.ipynb) | å¸‚åœºäº¤æ˜“æ—¥æœŸæŸ¥è¯¢å’ŒéªŒè¯ |
| å†å²Kçº¿ | [`02_hist_kline.py`](tutorials/02_hist_kline.py) | [`02_hist_kline.ipynb`](tutorials/notebooks/02_hist_kline.ipynb) | OHLCVæ•°æ®è·å–å’Œåˆ†æ |
| åˆçº¦è¯¦æƒ… | [`03_instrument_detail.py`](tutorials/03_instrument_detail.py) | [`03_instrument_detail.ipynb`](tutorials/notebooks/03_instrument_detail.ipynb) | è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢å’ŒéªŒè¯ |
| è‚¡ç¥¨åˆ—è¡¨ | [`04_stock_list.py`](tutorials/04_stock_list.py) | [`04_stock_list.ipynb`](tutorials/notebooks/04_stock_list.ipynb) | æ¿å—æ•°æ®å’Œæˆåˆ†è‚¡åˆ†æ |
| æœ€æ–°è¡Œæƒ… | [`06_latest_market.py`](tutorials/06_latest_market.py) | [`06_latest_market.ipynb`](tutorials/notebooks/06_latest_market.ipynb) | å®æ—¶æ•°æ®å¤„ç†å’Œç›‘æ§ |
| å®Œæ•´è¡Œæƒ… | [`07_full_market.py`](tutorials/07_full_market.py) | [`07_full_market.ipynb`](tutorials/notebooks/07_full_market.ipynb) | æ·±åº¦è¡Œæƒ…åˆ†æå’Œç»Ÿè®¡ |

### ğŸ“– å­¦ä¹ èµ„æº

- **[æ•™å­¦ç´¢å¼•](tutorials/TUTORIAL_INDEX.md)**: å®Œæ•´çš„å­¦ä¹ è·¯å¾„å’Œä½¿ç”¨æŒ‡å—
- **[éªŒè¯æŠ¥å‘Š](tutorials/VALIDATION_REPORT.md)**: æ•™å­¦æ–‡æ¡£çš„éªŒè¯çŠ¶æ€å’Œè´¨é‡æŠ¥å‘Š
- **[æ•…éšœæ’é™¤](tutorials/TROUBLESHOOTING.md)**: å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- **[æ•™ç¨‹README](tutorials/README.md)**: è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œç¯å¢ƒé…ç½®

### ğŸš€ å¿«é€Ÿå¼€å§‹æ•™å­¦

1. **Pythonè„šæœ¬å­¦ä¹ **ï¼š
   ```bash
   cd tutorials
   python 01_trading_dates.py
   ```

2. **Jupyteräº¤äº’å­¦ä¹ **ï¼š
   ```bash
   jupyter notebook tutorials/notebooks/01_trading_dates.ipynb
   ```

3. **æŸ¥çœ‹å­¦ä¹ è·¯å¾„**ï¼š
   ```bash
   # æŸ¥çœ‹å®Œæ•´æ•™å­¦è®¡åˆ’
   cat tutorials/TUTORIAL_INDEX.md
   ```

### ğŸ’¡ æ•™å­¦ç‰¹è‰²

- âœ… **åŒæ ¼å¼æ”¯æŒ**: æä¾›Pythonè„šæœ¬å’ŒJupyter Notebookä¸¤ç§æ ¼å¼
- âœ… **å¯æ‰§è¡Œä»£ç **: æ‰€æœ‰ç¤ºä¾‹éƒ½åŸºäºçœŸå®APIè°ƒç”¨
- âœ… **åˆ†æ­¥æŒ‡å¯¼**: è¯¦ç»†çš„æ“ä½œæ­¥éª¤å’Œæœ€ä½³å®è·µ
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œæ•…éšœæ’é™¤
- âœ… **æ€§èƒ½ç›‘æ§**: å†…ç½®æ€§èƒ½ç»Ÿè®¡å’Œä¼˜åŒ–å»ºè®®

## API æ¥å£è¯´æ˜

æœ¬ä»£ç†æä¾›ç¬¦åˆ OpenAPI (Swagger) è§„èŒƒçš„ RESTful APIã€‚å…·ä½“çš„APIæ¥å£å®šä¹‰ã€å‚æ•°åŠå“åº”ç»“æ„ä¸ `doc/system_design.md` ä¸­"æ¥å£è§„èŒƒ"éƒ¨åˆ†æ‰€è¿°ä¸€è‡´ï¼Œå¹¶é€šè¿‡ FastAPI åº”ç”¨åœ¨ `/docs` è·¯å¾„ä¸‹æä¾›è‡ªåŠ¨ç”Ÿæˆçš„ OpenAPI æ–‡æ¡£ã€‚

ä»¥ä¸‹ä¸ºä¸»è¦æ•°æ®è·å–æ¥å£çš„æ¦‚è§ˆ (å…·ä½“å‚æ•°è¯·å‚è€ƒ `/docs` æˆ– `doc/system_design.md`):

*   **è·å–äº¤æ˜“æ—¥å†:** `GET /trading_dates`
    *   å‚æ•°: `market`, `start_date`, `end_date`
*   **è·å–æ¿å—è‚¡ç¥¨åˆ—è¡¨:** `GET /stock_list`
    *   å‚æ•°: `sector`
*   **è·å–åˆçº¦è¯¦ç»†ä¿¡æ¯:** `GET /instrument_detail`
    *   å‚æ•°: `symbol`
*   **è·å–å†å²Kçº¿æ•°æ®:** `GET /hist_kline`
    *   å‚æ•°: `symbol`, `start_date`, `end_date`, `frequency`, `dividend_type` (å¤æƒç±»å‹), `fill_data` (æ˜¯å¦å¡«å……) ç­‰ã€‚
*   **è·å–æœ€æ–°è¡Œæƒ…å¿«ç…§:** `GET /latest_market`
    *   å‚æ•°: `symbols` (é€—å·åˆ†éš”çš„è‚¡ç¥¨ä»£ç åˆ—è¡¨)
*   **è·å–å®Œæ•´è¡Œæƒ…æ•°æ®:** `GET /full_market` (è¾ƒå°‘ä½¿ç”¨ï¼Œé€šå¸¸ `/latest_market` æˆ– `/hist_kline` å·²è¶³å¤Ÿ)
    *   å‚æ•°: `symbol`, `fields` (å¯é€‰)
*   **(å¯é€‰) åˆ›å»ºå›¾è¡¨é¢æ¿:** `POST /create_chart_panel` (ä¾èµ–QMTå®¢æˆ·ç«¯UIäº¤äº’)
    *   å‚æ•°: å…·ä½“å‚æ•°å¾…å®šï¼Œé€šå¸¸åŒ…æ‹¬ `codes`, `period`, `indicator_name` ç­‰ã€‚

**é€šç”¨è¯·æ±‚å¤´éƒ¨:**
*   `X-API-Key`: (æ¨è) ç”¨äºè®¤è¯çš„APIå¯†é’¥ã€‚å®é™…è®¤è¯æœºåˆ¶ä»¥æœ€ç»ˆå®ç°ä¸ºå‡†ã€‚

**é€šç”¨å“åº”ç»“æ„ (ç¤ºæ„):**
*   æˆåŠŸæ—¶: HTTPçŠ¶æ€ç  `200 OK`ï¼Œå“åº”ä½“é€šå¸¸ä¸ºJSONæ ¼å¼ï¼ŒåŒ…å«è¯·æ±‚çš„æ•°æ®ã€‚
    ```json
    // ä¾‹å¦‚: GET /instrument_detail?symbol=600519.SH
    {
      "symbol": "600519.SH",
      "name": "è´µå·èŒ…å°",
      "last_price": 1700.00,
      // ... å…¶ä»–å­—æ®µ
    }
    ```
*   å¤±è´¥æ—¶: HTTPçŠ¶æ€ç  `4xx` (å®¢æˆ·ç«¯é”™è¯¯) æˆ– `5xx` (æœåŠ¡å™¨é”™è¯¯)ï¼Œå“åº”ä½“é€šå¸¸åŒ…å«é”™è¯¯ä¿¡æ¯ã€‚
    ```json
    {
      "detail": "Error message explaining what went wrong."
    }
    ```
    *æ³¨: æ—§ç‰ˆæˆ–åŸºäº `xtquantai/server_direct.py` ç›´æ¥ä¿®æ”¹çš„ç‰ˆæœ¬å¯èƒ½é‡‡ç”¨ `{"success": true/false, "data": ..., "error": ...}` ç»“æ„ã€‚æœ¬æ–‡æ¡£æè¿°çš„æ˜¯æ¨èçš„ RESTful é£æ ¼ã€‚è¯·ä»¥æœåŠ¡å®é™…æä¾›çš„ `/docs` ä¸ºå‡†ã€‚*


### Get Instrument Detail

-   **Endpoint:** `/instrument_detail`
-   **Method:** `GET`
-   **Query Parameter:**
    -   `symbol` (string, required): The stock/contract symbol (e.g., "600519.SH").
-   **Example:**
    ```python
    import requests

    response = requests.get(
        "http://localhost:8000/instrument_detail",
        params={"symbol": "600519.SH"}
    )
    print(response.json())
    ```

## é˜²ç«å¢™ä¸è¿æ¥æµ‹è¯•

### é˜²ç«å¢™æµ‹è¯•
è¿è¡Œ `firewall_test.bat` è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†ï¼š
1. ä¸´æ—¶ç¦ç”¨é˜²ç«å¢™
2. è¿è¡Œ `miniqmt_test.py`
3. é‡æ–°å¯ç”¨é˜²ç«å¢™

### è¿æ¥æµ‹è¯•
è¿è¡Œ `connection_test.py` è„šæœ¬æµ‹è¯•xtQuantè¿æ¥ï¼š
```bash
python connection_test.py
```


## è´¦å·é…ç½®è¯´æ˜

åœ¨ä½¿ç”¨`miniqmt_test.py`è„šæœ¬å‰ï¼š
1. æ‰“å¼€è„šæœ¬æ–‡ä»¶æ‰¾åˆ°ä»¥ä¸‹è¡Œï¼š
   ```python
   account = "æ›¿æ¢ä¸ºæ‚¨çš„äº¤æ˜“è´¦å·"  # å ä½ç¬¦ï¼Œç”¨æˆ·éœ€è¦å¡«å†™
   ```
2. å°†`æ›¿æ¢ä¸ºæ‚¨çš„äº¤æ˜“è´¦å·`æ”¹ä¸ºæ‚¨çš„å®é™…äº¤æ˜“è´¦å·ï¼ˆä¾‹å¦‚ï¼š`"123456789"`ï¼‰
3. ä¿å­˜æ–‡ä»¶åè¿è¡Œè„šæœ¬

## QMTè·¯å¾„é…ç½®è¯´æ˜

åœ¨ä½¿ç”¨`miniqmt_test.py`è„šæœ¬å‰ï¼Œè¯·ç¡®è®¤æ‚¨çš„QMTå®‰è£…è·¯å¾„ï¼š
1. æ‰“å¼€è„šæœ¬æ–‡ä»¶ï¼Œæ‰¾åˆ°ä»¥ä¸‹è¡Œï¼š
   ```python
   qmt_path = "G:\\Stock\\GJ_QMT\\bin.x64"  # ä½¿ç”¨ç”¨æˆ·æä¾›çš„QMTè·¯å¾„
   ```
2. å¦‚æœæ‚¨çš„QMTå®‰è£…è·¯å¾„ä¸åŒï¼Œè¯·å°†è·¯å¾„ä¿®æ”¹ä¸ºæ‚¨çš„å®é™…å®‰è£…è·¯å¾„ï¼ˆæ³¨æ„ï¼šè·¯å¾„ä¸­ä½¿ç”¨åŒåæ–œæ `\\`ï¼‰
3. ä¿å­˜æ–‡ä»¶åè¿è¡Œè„šæœ¬

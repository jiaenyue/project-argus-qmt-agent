
## 项目风险登记册 (Consolidated Version)

**项目名称:** Project Argus: 天枢计划
**文档版本:** 2.0 (整合最终版)
**编制人:** 资深项目经理 (PM)
**日期:** 2023-10-30

### 1. 文档目的与风险评估标准

本文档旨在全面识别、分析、评估并规划应对措施，以主动管理项目中所有潜在风险。其目标是降低负面风险的概率和影响，确保项目目标达成。

*   **评估方法:**
    *   **概率 (P) & 影响 (I):** 采用1-5分制 (1=非常低, 5=非常高)。
    *   **风险评分 (Score):** `概率 × 影响`。
*   **风险等级 (Level):**
    *   **关键 (Critical):** 16 - 25
    *   **高 (High):** 10 - 15
    *   **中 (Medium):** 5 - 9
    *   **低 (Low):** 1 - 4

### 2. 技术风险 (Technical Risks)

| 风险ID | 风险描述 | P | I | Score | Level | 响应策略 | 缓解措施 (Proactive) | 应急计划 (Reactive) | 负责人 | 状态 |
| :--- | :--- | :-: | :-: | :-: | :--- | :--- | :--- | :--- | :--- | :--- |
| **TECH-01** | **Tushare Pro API 发生不兼容变更。** 作为核心补充源，其API的破坏性变更将直接导致数据采集失败和管道中断，影响系统可用性。 | 4 | 5 | 20 | **关键** | **减轻 (Mitigate)** | 1. **抽象适配器层:** `TushareAdapter`隔离API变更影响，变更仅需修改适配器。 <br>2. **契约测试:** 在CI/CD中加入自动化测试，提前发现不兼容变更。<br>3. **官方公告监控:** 订阅并监控Tushare官方更新。 | 1. **立即冻结:** 自动/手动停止所有Tushare采集任务。<br>2. **紧急修复:** 启动快速响应小组，在4小时内发布适配器补丁。<br>3. **手动回补:** 在修复期间，手动回填关键数据。 | 架构师 | Open |
| **TECH-02** | **新增核心组件 (Kafka, Delta Lake) 运维复杂性高。** 团队经验不足可能导致配置不当、故障排查缓慢，影响系统可用性 (NFR-003)。 | 3 | 4 | 12 | **高** | **减轻 (Mitigate)** | 1. **基础设施即代码 (IaC):** 使用Terraform/Ansible管理部署。<br>2. **专项培训:** 对DevOps团队进行Kafka和Delta Lake的专项培训。<br>3. **使用云托管服务:** 优先考虑使用云厂商托管服务（如MSK, Databricks）。 | 1. **建立应急SOP:** 针对常见故障（分区落后、事务冲突）制定标准操作流程。<br>2. **专家支持:** 建立与云服务商或商业支持的联系渠道。<br>3. **启用降级模式:** 若核心组件故障，启动备用简化流程（如绕过Kafka）。 | DevOps工程师 | Open |
| **TECH-03** | **日数据处理性能未达标。** 端到端处理时间超过60分钟目标 (NFR-001)，导致策略在次日开盘前无法使用最新数据。 | 3 | 4 | 12 | **高** | **减轻 (Mitigate)** | 1. **性能基准测试:** 在阶段4进行专项性能和压力测试。<br>2. **架构优化:** 利用K8s并行处理、Delta Lake Z-Order和自动Compaction。<br>3. **代码审查:** 重点审查I/O和计算密集型代码效率。 | 1. **性能剖析:** 使用profiling工具定位瓶颈。<br>2. **动态扩容:** 临时增加K8s Pod的CPU/内存或增加Pod数量。<br>3. **逻辑降级:** 临时关闭非核心但耗时的处理步骤，优先保障核心数据产出。 | 架构师 | Open |

### 3. 数据风险 (Data Risks)

| 风险ID | 风险描述 | P | I | Score | Level | 响应策略 | 缓解措施 (Proactive) | 应急计划 (Reactive) | 负责人 | 状态 |
| :--- | :--- | :-: | :-: | :-: | :--- | :--- | :--- | :--- | :--- | :--- |
| **DATA-01** | **多源数据一致性低于预期 (低于99%)。** 主备数据源在核心字段（如收盘价）上存在系统性偏差，导致Gold层数据不可信。 | 4 | 5 | 20 | **关键** | **减轻 (Mitigate)** | 1. **自动化一致性监控:** 实时监控差异率并可视化。<br>2. **动态阈值:** 根据市场波动性自动调整容忍度。<br>3. **以主源为准绳:** 明确以miniQMT行情和Tushare财务为判断基准。 | 1. **自动隔离:** 差异超阈值的数据被隔离，不进入Gold层，并触发P1告警。<br>2. **根因分析队列:** 差异数据进入人工审核队列，由DQA分析根本原因。<br>3. **规则更新:** 根据分析结果，调整融合引擎的清洗或对齐逻辑。 | 数据质量专家 (DQA) | Open |
| **DATA-02** | **Tushare配额耗尽导致关键数据缺失。** 积分意外耗尽将导致财务等补充数据无法获取，影响数据完整性和下游因子计算。 | 4 | 4 | 16 | **关键** | **避免 (Avoid)** | 1. **智能配额管理:** `TushareQuotaManager`使用Redis实时计数。<br>2. **90%阈值预警:** 配额使用率达90%触发P1告警，给人工干预留出时间。<br>3. **缓存与批量:** 对元数据进行缓存，并使用批量请求减少调用次数。 | 1. **自动故障转移:** 对行情数据，自动切换为仅使用miniQMT。<br>2. **任务熔断:** 对补充数据，自动熔断当日任务，防止产生不完整数据。<br>3. **分析调用模式:** 收到预警后，立即分析API调用日志，找出异常消耗点。 | 开发负责人 | Open |
| **DATA-03** | **复权因子计算或应用错误。** `adj_factor`错误将导致整个历史价格序列失真，所有量化回测结果无效，是灾难性数据事故。 | 2 | 5 | 10 | **高** | **避免 (Avoid)** | 1. **双源交叉验证:** 交叉比对Tushare和miniQMT提供的复权因子。<br>2. **单元测试:** 编写测试用例，覆盖送股、分红、配股等所有复权场景。<br>3. **连续性校验:** 每日执行价格连续性校验，检查复权后价格是否存在跳空异常。 | 1. **停止数据发布:** 一旦发现复权错误，立即停止向Gold层发布数据。<br>2. **全量数据重算:** 定位根因后，触发Airflow DAG对历史数据进行全量重算。<br>3. **通知下游用户:** 告知所有数据消费者此次数据质量事故、影响范围及修复时间。 | 数据质量专家 (DQA) | Open |

### 4. 安全与合规风险 (Security & Compliance Risks)

| 风险ID | 风险描述 | P | I | Score | Level | 响应策略 | 缓解措施 (Proactive) | 应急计划 (Reactive) | 负责人 | 状态 |
| :--- | :--- | :-: | :-: | :-: | :--- | :--- | :--- | :--- | :--- | :--- |
| **SEC-01** | **API Token等敏感凭证泄露。** 凭证被硬编码或在日志中明文打印，导致数据源账户被盗用。 | 2 | 5 | 10 | **高** | **避免 (Avoid)** | 1. **安全存储:** 严格使用K8s Secrets或Vault管理凭证，严禁硬编码。<br>2. **CI/CD安全扫描:** 集成`git-secrets`等工具，自动扫描敏感信息。<br>3. **最小权限原则:** 为API Token配置IP白名单和最小化的数据访问权限。 | 1. **立即轮换凭证:** 一旦发现泄露，立即吊销旧Token并生成新Token。<br>2. **全面审计:** 审查代码库和日志，清除所有泄露的凭证痕迹。<br>3. **安全复盘:** 分析泄露原因，加固流程，对团队进行安全意识培训。 | DevOps工程师 | Open |
| **SEC-02** | **违反Tushare数据使用协议。** 未经授权的数据分发或不当使用，可能导致法律纠纷和API账户被封禁。 | 2 | 4 | 8 | **中** | **避免 (Avoid)** | 1. **法务审核:** 由法务团队审核API协议条款，明确使用边界。<br>2. **数据访问审计:** 对Gold层数据的访问进行全量日志记录。<br>3. **定期培训:** 对数据消费方进行合规使用培训。 | 1. **立即停止违规行为。**<br>2. **内部调查:** 启动内部调查，确定违规范围和原因。<br>3. **主动沟通:** 与Tushare官方沟通，解释情况并采取补救措施。 | 项目经理 | Open |

### 5. 资源与交付风险 (Resource & Delivery Risks)

| 风险ID | 风险描述 | P | I | Score | Level | 响应策略 | 缓解措施 (Proactive) | 应急计划 (Reactive) | 负责人 | 状态 |
| :--- | :--- | :-: | :-: | :-: | :--- | :--- | :--- | :--- | :--- | :--- |
| **RSK-01** | **项目范围蔓延。** 在开发过程中不断引入新需求，导致45天的交付计划严重延期。 | 3 | 5 | 15 | **高** | **减轻 (Mitigate)** | 1. **严格变更控制:** 所有超出`RequirementsTraceabilityMatrix.md`的需求必须通过正式变更控制流程。<br>2. **分阶段交付:** 严格遵循`plan.md`的阶段性交付物，优先保障核心功能。<br>3. **明确范围边界:** 在项目启动会向所有干系人重申`In-Scope`和`Out-of-Scope`。 | 1. **评估影响:** 对已发生的范围蔓延，立即评估其对进度、成本的影响。<br>2. **重新排定优先级:** 与产品负责人协商，将非核心的新需求移至下一迭代。<br>3. **申请额外资源:** 如变更被批准且影响巨大，则正式申请延期或增加资源。 | 项目经理 | Open |
| **RSK-02** | **基础设施成本超支。** 云存储、计算资源或Tushare积分消耗超出预算，影响项目ROI。 | 3 | 3 | 9 | **中** | **减轻 (Mitigate)** | 1. **成本监控告警:** 设置云服务和Tushare的成本/配额告警。<br>2. **成本优化设计:** 采用冷热数据分层存储、Spot实例、每日清理中间数据等策略。<br>3. **定期审查:** 每月审查资源使用情况，关停闲置资源。 | 1. **成本归因分析:** 当收到超支告警时，分析账单和日志，定位超支源头。<br>2. **紧急优化:** 立即实施成本优化措施，如缩减资源规格。<br>3. **申请追加预算:** 如成本是业务增长所致，则提供数据支撑，申请追加预算。 | DevOps工程师 | Open |

### 6. 运营风险 (Operations Risks)

| 风险ID | 风险描述 | P | I | Score | Level | 响应策略 | 缓解措施 (Proactive) | 应急计划 (Reactive) | 负责人 | 状态 |
| :--- | :--- | :-: | :-: | :-: | :--- | :--- | :--- | :--- | :--- | :--- |
| **OPS-01** | **故障转移机制失效或超时。** 主数据源故障时，自动切换到备用源的时间超过2分钟SLA，或切换失败，导致数据供应中断。 | 2 | 5 | 10 | **高** | **避免 (Avoid)** | 1. **混沌工程测试:** 每月定期注入故障（如模拟API超时、网络分区）来测试容灾能力。<br>2. **双活采集:** 在资源允许的情况下，考虑对最核心数据采用双活采集通道。<br>3. **自动化回切:** 验证主源恢复后，系统能自动、平滑地切回主源。 | 1. **手动介入:** 如果自动切换失败，运维手册应包含清晰的手动切换步骤。<br>2. **根因分析:** 故障恢复后，必须进行复盘，分析切换失败原因并修复。<br>3. **告警升级:** 切换失败应触发最高级别的P0告警，直达核心运维人员。 | DevOps工程师 | Open |
| **OPS-02** | **监控盲区导致潜在问题未被发现。** 例如Kafka消息积压、Delta Lake文件碎片化等问题未被监控，长期累积后导致系统崩溃。 | 3 | 4 | 12 | **高** | **减轻 (Mitigate)** | 1. **全链路监控:** 确保从数据源到数据消费的每个组件都有核心健康指标监控。<br>2. **部署专用Exporter:** 如`Prometheus Kafka Exporter`，监控关键中间件。<br>3. **定期审计:** 每季度对监控覆盖率进行审计，填补盲区。 | 1. **扩展监控:** 一旦发现盲区，立即添加相应的监控项和告警规则。<br>2. **建立知识库:** 将新发现的问题和监控方法记录到内部知识库。<br>3. **可视化展示:** 将新指标添加到Grafana核心运维看板。 | DevOps工程师 | Open |

### 7. 风险治理框架 (Risk Governance Framework)

1.  **动态监控与评审**
    *   **每周风险评审会:** 更新高风险项（级别≥高）的概率/影响评分和应对措施进展。
    *   **风险仪表盘:** 在Grafana中创建风险仪表盘，可视化关键风险指标（如：多源一致性率、配额使用率、处理延迟），将风险管理数据化。

2.  **应急响应流程**
    ```mermaid
    graph LR
        A["风险事件触发<br>(Prometheus告警)"] --> B{是否有预案覆盖?}
        B -- Yes --> C["执行预设的<br>应急计划 (Reactive Plan)"]
        B -- No --> D["启动应急响应小组(SWAT)"]
        D --> E[1小时内定级并制定临时方案]
        E --> F[方案快速评审] --> G[授权执行]
    ```

3.  **闭环验证与知识沉淀**
    *   所有状态变更为“已关闭”的风险，必须附上关闭证据（如：测试报告、监控截图、SOP文档、渗透测试结果）。
    *   每次重大风险事件处理完毕后，需进行复盘（Post-mortem），并将经验教训更新到相关设计文档或SOP中，形成组织过程资产。